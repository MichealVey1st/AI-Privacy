# AI Privacy Editor (v3)

## Overview

Version 3 builds upon the foundation of v2, reintroducing YOLO for improved face detection accuracy while maintaining the modular, flag-based functionality introduced earlier. It also includes refinements in video processing efficiency and error handling.

## Key Changes in v3

1. **Reintroduction of YOLO for Face Detection**:
   - Replaced MediaPipe with YOLO (v3) for face detection to address accuracy issues.
   - Improved detection performance for faces at varying angles and distances.
   - Integrated Non-Maximum Suppression (NMS) for handling overlapping detections.

2. **Enhanced Face Blurring**:
   - Applied Gaussian blur to detected face regions with expanded bounding boxes for robustness.
   - Implemented fallback to previous frame's detected faces if none are identified in the current frame.

3. **Video Processing Improvements**:
   - Used `cv2.VideoWriter` with H264 codec for MP4 output compatibility.
   - Improved frame resizing logic for consistency between input and output video resolutions.
   - Integrated progress tracking with `tqdm` for frame-by-frame updates.

4. **Expanded Modularity**:
   - Retained flag-based controls:
     - `-f` or `--blur-faces`: Enable face blurring.
     - `-d` or `--modify-voices`: Placeholder for voice modification.
     - `-s` or `--blur-signs`: Placeholder for sign/license plate blurring.
     - `-m` or `--overwrite-metadata`: Placeholder for metadata overwriting.
   - Modularized processing functions for easier debugging and feature expansion.

5. **Batch Processing**:
   - Supported batch processing of multiple videos in an input folder with outputs saved in a specified folder.
   - Added improved error handling to skip problematic files while processing others.

## Features

### Implemented Features

- **Face Blurring**:
  - Used YOLO (v3) for face detection with a confidence threshold of 0.5.
  - Applied Gaussian blur to identified face regions.
  - Fallback mechanism to handle undetected faces in certain frames.

### Placeholder Features

- **Voice Modification**:
  - Plan to implement speaker detection and voice alteration.
- **Sign Blurring**:
  - Plan to detect and blur sensitive signs such as street names or license plates.
- **Metadata Overwriting**:
  - Plan to overwrite video metadata with blank or false information.

## Known Issues

1. **CUDA Utilization**:
   - YOLO uses CPU instead of GPU, potentially slowing down processing. CUDA support is not yet implemented.
2. **Audio Handling**:
   - Audio tracks are not retained in the output video.
3. **Detection Fallbacks**:
   - While fallback for undetected faces improves robustness, it may blur outdated regions in dynamic scenes.
4. **Granular Control**:
   - Lack of functionality for selecting specific faces or regions for blurring.

## Usage

### Command-Line Arguments

Run the script with the following options:

```bash
python main.py [options]
